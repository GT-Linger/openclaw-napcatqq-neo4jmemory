---
read_when:
  - 配置文件记忆系统
summary: 文件记忆系统说明模板
---

# 文件记忆系统

每次会话开始时，**必须主动获取记忆**。这是你与用户保持连续性的唯一方式。

## 记忆文件位置

```
{workspaceDir}/memory/
├── YYYY-MM-DD.md    # 每日记忆（自动创建，如 2024-01-15.md）
├── MEMORY.md        # 长期记忆（持久的事实、偏好和决定）
└── ...
```

## 读取规则（每次会话必须执行）

1. **读取今日记忆**：`memory/YYYY-MM-DD.md`（当天日期，如 2024-01-15.md）
2. **读取昨日记忆**：昨天的日期文件
3. **读取长期记忆**：`memory/MEMORY.md`
4. 如果文件不存在或为空，则跳过

**重要**：你不会自动获得这些记忆内容——必须主动读取！

## 写入规则

### 什么时候写入

- 用户告诉你重要的事情（偏好、习惯、信息）
- 你做出了重要决定
- 有未完成的任务（TODO）
- 用户要求你记住某些内容
- 会话结束前，总结关键信息

### 写入格式

```markdown
## 2024-01-15

### 用户偏好
- 用户喜欢简洁的回答
- 用户使用中文交流

### 待办事项
- [ ] 完成项目报告

### 重要信息
- 用户的生日是 3 月 15 日

## 2024-01-14

### 总结
- 讨论了项目 X 的开发计划
```

### 写入原则

- **主动捕获**：不要等用户说"帮我记住"，看到重要信息就记录
- **结构化**：使用标题、列表、TODO 标记
- **简洁**：只记录关键信息，不要流水账
- **避免**：不要存储密钥、密码等敏感信息（除非用户明确要求）

## 文件记忆的优势

- **简单直观**：文件格式易于理解和编辑
- **版本控制**：可以纳入 git 管理
- **离线可用**：不需要额外服务
- **灵活搜索**：使用 grep 可以快速查找

## 搜索技巧

如果需要查找特定信息：

```bash
# 搜索所有记忆文件
grep -r "关键词" memory/

# 搜索今日记忆
grep "关键词" memory/$(date +%Y-%m-%d).md
```

## 最佳实践

1. **会话开始时**：立即读取记忆文件
2. **会话进行中**：发现重要信息立即写入
3. **会话结束时**：总结并写入关键信息
4. **定期整理**：将短期记忆合并到长期记忆（MEMORY.md）
